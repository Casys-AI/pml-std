{
  "name": "hierarchical-deep",
  "description": "Deep hierarchy for testing recursive SHGAT and DASH validation",
  "nodes": {
    "tools": [
      { "id": "core__read", "pageRank": 0.08, "community": 0 },
      { "id": "core__write", "pageRank": 0.07, "community": 0 },
      { "id": "core__validate", "pageRank": 0.06, "community": 0 },
      { "id": "transform__parse", "pageRank": 0.06, "community": 1 },
      { "id": "transform__format", "pageRank": 0.05, "community": 1 },
      { "id": "transform__convert", "pageRank": 0.05, "community": 1 },
      { "id": "storage__local", "pageRank": 0.04, "community": 2 },
      { "id": "storage__cloud", "pageRank": 0.05, "community": 2 },
      { "id": "storage__archive", "pageRank": 0.03, "community": 2 },
      { "id": "notify__email", "pageRank": 0.04, "community": 3 },
      { "id": "notify__slack", "pageRank": 0.03, "community": 3 },
      { "id": "notify__webhook", "pageRank": 0.04, "community": 3 }
    ],
    "capabilities": [
      {
        "id": "cap__io_basic",
        "toolsUsed": ["core__read", "core__write"],
        "successRate": 0.98,
        "level": 0,
        "parents": [],
        "children": []
      },
      {
        "id": "cap__validation",
        "toolsUsed": ["core__validate"],
        "successRate": 0.99,
        "level": 0,
        "parents": [],
        "children": []
      },
      {
        "id": "cap__transform",
        "toolsUsed": ["transform__parse", "transform__format", "transform__convert"],
        "successRate": 0.95,
        "level": 0,
        "parents": [],
        "children": []
      },
      {
        "id": "cap__storage",
        "toolsUsed": ["storage__local", "storage__cloud", "storage__archive"],
        "successRate": 0.92,
        "level": 0,
        "parents": [],
        "children": []
      },
      {
        "id": "cap__notify",
        "toolsUsed": ["notify__email", "notify__slack", "notify__webhook"],
        "successRate": 0.90,
        "level": 0,
        "parents": [],
        "children": []
      },
      {
        "id": "cap__validated_io",
        "toolsUsed": [],
        "successRate": 0.97,
        "level": 1,
        "parents": [],
        "children": ["cap__io_basic", "cap__validation"],
        "note": "Composite: IO + Validation"
      },
      {
        "id": "cap__data_processing",
        "toolsUsed": [],
        "successRate": 0.93,
        "level": 1,
        "parents": [],
        "children": ["cap__transform", "cap__validated_io"],
        "note": "Composite: Transform + Validated IO"
      },
      {
        "id": "cap__persistent_data",
        "toolsUsed": [],
        "successRate": 0.90,
        "level": 2,
        "parents": [],
        "children": ["cap__data_processing", "cap__storage"],
        "note": "Composite: Data Processing + Storage"
      },
      {
        "id": "cap__observable_pipeline",
        "toolsUsed": [],
        "successRate": 0.88,
        "level": 3,
        "parents": [],
        "children": ["cap__persistent_data", "cap__notify"],
        "note": "Top level: Full pipeline with notifications"
      }
    ],
    "metaCapabilities": [
      {
        "id": "meta__level1",
        "contains": ["cap__validated_io", "cap__data_processing"],
        "description": "Level 1 composite capabilities"
      },
      {
        "id": "meta__level2",
        "contains": ["cap__persistent_data"],
        "description": "Level 2 composite capabilities"
      },
      {
        "id": "meta__level3",
        "contains": ["cap__observable_pipeline"],
        "description": "Level 3 top-level capabilities"
      }
    ]
  },
  "edges": [
    {
      "source": "core__read",
      "target": "core__validate",
      "type": "provides",
      "source_type": "observed",
      "weight": 0.95,
      "count": 200
    },
    {
      "source": "core__validate",
      "target": "transform__parse",
      "type": "provides",
      "source_type": "observed",
      "weight": 0.90,
      "count": 180
    },
    {
      "source": "transform__parse",
      "target": "transform__format",
      "type": "provides",
      "source_type": "observed",
      "weight": 0.85,
      "count": 160
    },
    {
      "source": "transform__format",
      "target": "storage__cloud",
      "type": "provides",
      "source_type": "observed",
      "weight": 0.80,
      "count": 140
    },
    {
      "source": "storage__cloud",
      "target": "notify__webhook",
      "type": "sequence",
      "source_type": "observed",
      "weight": 0.75,
      "count": 100
    },
    {
      "source": "core__write",
      "target": "storage__local",
      "type": "provides",
      "source_type": "observed",
      "weight": 0.88,
      "count": 120
    },
    {
      "source": "storage__local",
      "target": "storage__archive",
      "type": "sequence",
      "source_type": "inferred",
      "weight": 0.60,
      "count": 50
    },

    {
      "source": "cap__validated_io",
      "target": "cap__io_basic",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null,
      "note": "Composite contains leaf"
    },
    {
      "source": "cap__validated_io",
      "target": "cap__validation",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__data_processing",
      "target": "cap__transform",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__data_processing",
      "target": "cap__validated_io",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__persistent_data",
      "target": "cap__data_processing",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__persistent_data",
      "target": "cap__storage",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__observable_pipeline",
      "target": "cap__persistent_data",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },
    {
      "source": "cap__observable_pipeline",
      "target": "cap__notify",
      "type": "contains",
      "source_type": "static",
      "weight": 1.0,
      "count": null
    },

    {
      "source": "transform__convert",
      "target": "transform__parse",
      "type": "depends_on",
      "source_type": "inferred",
      "weight": 0.70,
      "count": 30,
      "note": "Convert depends on parse output"
    },
    {
      "source": "storage__archive",
      "target": "storage__cloud",
      "type": "depends_on",
      "source_type": "inferred",
      "weight": 0.65,
      "count": 25,
      "note": "Archive depends on cloud availability"
    }
  ],
  "hierarchy": {
    "depth": 4,
    "levels": [
      {
        "level": 0,
        "capabilities": [
          "cap__io_basic",
          "cap__validation",
          "cap__transform",
          "cap__storage",
          "cap__notify"
        ],
        "type": "leaf"
      },
      {
        "level": 1,
        "capabilities": ["cap__validated_io", "cap__data_processing"],
        "type": "composite"
      },
      { "level": 2, "capabilities": ["cap__persistent_data"], "type": "composite" },
      { "level": 3, "capabilities": ["cap__observable_pipeline"], "type": "root" }
    ]
  },
  "testCases": {
    "recursive_shgat": {
      "target": "cap__observable_pipeline",
      "expectedRecursiveDepth": 4,
      "expectedToolCount": 12,
      "note": "SHGAT should recurse through all levels"
    },
    "dash_validation": {
      "shouldBeDAG": true,
      "topologicalOrder": [
        "cap__io_basic",
        "cap__validation",
        "cap__transform",
        "cap__storage",
        "cap__notify",
        "cap__validated_io",
        "cap__data_processing",
        "cap__persistent_data",
        "cap__observable_pipeline"
      ]
    },
    "depth_decay": {
      "decayFactor": 0.8,
      "level0_contribution": 1.0,
      "level1_contribution": 0.8,
      "level2_contribution": 0.64,
      "level3_contribution": 0.512
    }
  }
}
