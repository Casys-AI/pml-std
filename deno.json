{
  "name": "@casys/mcp-gateway",
  "version": "0.1.0",
  "license": "MIT",
  "exports": {
    ".": "./mod.ts",
    "./capabilities": "./src/capabilities/mod.ts",
    "./dag": "./src/dag/mod.ts",
    "./sandbox": "./src/sandbox/mod.ts",
    "./mcp": "./src/mcp/mod.ts",
    "./graphrag": "./src/graphrag/mod.ts",
    "./vector": "./src/vector/mod.ts",
    "./db": "./src/db/mod.ts",
    "./events": "./src/events/mod.ts"
  },
  "publish": {
    "include": ["mod.ts", "src/", "README.md", "LICENSE"],
    "exclude": ["src/**/*_test.ts", "src/**/*.bench.ts"]
  },
  "nodeModulesDir": "auto",
  "tasks": {
    "dev": "deno run --allow-all scripts/backup-db.ts || true; deno run --watch --allow-all --env --unstable-worker-options --unstable-kv src/main.ts serve --port 3003 --config config/.mcp-servers.json",
    "dev:api": "deno run --allow-all scripts/backup-db.ts || true; deno run --watch --allow-all --env --unstable-worker-options --unstable-broadcast-channel --unstable-kv src/main.ts serve --port 3003 --config config/.mcp-servers.json",
    "db:backup": "deno run --allow-all scripts/backup-db.ts",
    "db:backup:prod": "deno run --allow-all scripts/backup-db.ts .pml.db .pml.db.last",
    "dev:fresh": "cd src/web && deno run -A --env=../../.env --unstable-kv --node-modules-dir=auto npm:vite",
    "dev:build": "cd src/web && vite build",
    "prod:start": "sudo systemctl start casys-dashboard casys-api",
    "prod:start:dashboard": "sudo systemctl start casys-dashboard",
    "prod:start:api": "sudo systemctl start casys-api",
    "prod:stop": "sudo systemctl stop casys-dashboard casys-api",
    "prod:stop:dashboard": "sudo systemctl stop casys-dashboard",
    "prod:stop:api": "sudo systemctl stop casys-api",
    "prod:restart": "sudo systemctl restart casys-dashboard casys-api",
    "prod:restart:dashboard": "sudo systemctl restart casys-dashboard",
    "prod:restart:api": "sudo systemctl restart casys-api",
    "prod:status": "sudo systemctl status casys-dashboard casys-api --no-pager",
    "prod:status:dashboard": "sudo systemctl status casys-dashboard --no-pager",
    "prod:status:api": "sudo systemctl status casys-api --no-pager",
    "prod:logs": "journalctl -u casys-api -u casys-dashboard -f",
    "prod:logs:dashboard": "journalctl -u casys-dashboard -f",
    "prod:logs:api": "journalctl -u casys-api -f",
    "prod:build": "cd src/web && vite build",
    "deploy:dashboard": "git pull origin main && cd src/web && vite build && sudo systemctl restart casys-dashboard",
    "deploy:all": "git pull origin main && cd src/web && vite build && sudo systemctl restart casys-dashboard casys-api",
    "rebuild:dashboard": "cd src/web && vite build && sudo systemctl restart casys-dashboard",
    "rebuild:all": "cd src/web && vite build && sudo systemctl restart casys-dashboard casys-api",
    "test": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv --no-check --ignore=tests/benchmarks/",
    "test:unit": "deno task test:unit:fast && deno task test:unit:slow",
    "test:unit:fast": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv --no-check --parallel tests/unit/vector/ tests/unit/graphrag/ tests/unit/context/ tests/unit/telemetry/ tests/unit/db/ tests/unit/cli/ tests/unit/events/ tests/unit/health/ tests/unit/learning/ tests/unit/errors/ tests/unit/utils/ tests/unit/lib/ tests/unit/mcp/ tests/unit/web/ tests/unit/cloud/",
    "test:unit:slow": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv --no-check tests/unit/sandbox/ tests/unit/server/ tests/unit/capabilities/",
    "test:unit:legacy": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv --no-check tests/unit/",
    "test:integration": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv --no-check tests/integration/ --ignore=tests/integration/e2e_migration_test.ts",
    "test:worker": "deno test --allow-all --unstable-worker-options --unstable-broadcast-channel --unstable-kv tests/unit/sandbox/worker_bridge_test.ts",
    "test:e2e": "RUN_E2E_TESTS=true deno test --allow-all tests/integration/e2e_migration_test.ts",
    "bench": "deno bench --allow-all",
    "bench:shgat": "deno run --allow-all tests/benchmarks/shgat-embeddings.bench.ts",
    "build:std": "deno run --allow-read --allow-write --allow-env --allow-run lib/std/build.ts",
    "lint": "deno lint",
    "fmt": "deno fmt",
    "check": "deno check src/**/*.ts",
    "cli": "deno run --allow-all --unstable-worker-options src/main.ts",
    "mcp": "deno run --allow-all --env --unstable-worker-options --unstable-kv src/main.ts serve --config config/.mcp-servers.json",
    "build": "deno compile --allow-all --output=pml src/main.ts",
    "mock:fs": "deno run --allow-all tests/mocks/filesystem-mock.ts",
    "mock:db": "deno run --allow-all tests/mocks/database-mock.ts",
    "mock:api": "deno run --allow-all tests/mocks/api-mock.ts",
    "db:restore": "rm -rf .pml-dev.db && cp -r .pml-dev.db.last .pml-dev.db && echo '✓ Database restored from .pml-dev.db.last'",
    "db:backup:prod": "cp -r ~/.pml/.pml.db ~/.pml/.pml.db.backup && echo '✓ Production DB backed up to ~/.pml/.pml.db.backup'",
    "db:restore:prod": "rm -rf ~/.pml/.pml.db && cp -r ~/.pml/.pml.db.backup ~/.pml/.pml.db && echo '✓ Production DB restored'"
  },
  "fmt": {
    "useTabs": false,
    "lineWidth": 100,
    "semiColons": true,
    "indentWidth": 2
  },
  "lint": {
    "rules": {
      "tags": ["recommended"]
    },
    "exclude": [
      "tests/",
      "benchmarks/",
      "scripts/",
      "_bmad/"
    ]
  },
  "imports": {
    "echarts": "npm:echarts@^6.0.0",
    "fresh": "jsr:@fresh/core@^2.0.0",
    "fresh/": "jsr:/@fresh/core@^2.0.0/",
    "@fresh/plugin-vite": "jsr:@fresh/plugin-vite@^1.0.0",
    "vite": "npm:vite@^7.1.3",
    "preact": "npm:preact@^10.27.0",
    "preact/hooks": "npm:preact@^10.27.0/hooks",
    "preact/jsx-runtime": "npm:preact@^10.27.0/jsx-runtime",
    "preact/jsx-dev-runtime": "npm:preact@^10.27.0/jsx-dev-runtime",
    "@preact/signals": "npm:@preact/signals@^2.5.1",
    "@preact/signals-core": "npm:@preact/signals-core@^1.12.1",
    "tailwindcss": "npm:tailwindcss@^4.1.10",
    "@tailwindcss/vite": "npm:@tailwindcss/vite@^4.1.12",
    "@std/assert": "jsr:@std/assert@1.0.11",
    "@std/dotenv": "jsr:@std/dotenv@0.225.3",
    "@std/fs": "jsr:@std/fs@1.0.19",
    "@std/log": "jsr:@std/log@0.224.14",
    "@std/yaml": "jsr:@std/yaml@1.0.10",
    "@std/fmt/colors": "jsr:@std/fmt@1.0.8/colors",
    "@cliffy/command": "jsr:@cliffy/command@1.0.0-rc.8",
    "@electric-sql/pglite": "npm:@electric-sql/pglite@0.3.14",
    "@electric-sql/pglite/vector": "npm:@electric-sql/pglite@0.3.14/vector",
    "postgres": "npm:postgres@^3.4.7",
    "@huggingface/transformers": "npm:@huggingface/transformers@3.7.6",
    "graphology": "npm:graphology@^0.25.4",
    "graphology-metrics": "npm:graphology-metrics@^2.2.0",
    "graphology-shortest-path": "npm:graphology-shortest-path@^2.0.2",
    "graphology-communities-louvain": "npm:graphology-communities-louvain@^2.0.1",
    "@modelcontextprotocol/sdk": "npm:@modelcontextprotocol/sdk@^1.15.1",
    "@smithery/sdk": "npm:@smithery/sdk@^2.1.0",
    "@smithery/sdk/shared/config.js": "npm:@smithery/sdk/shared/config.js",
    "validator": "npm:validator@13.15.22",
    "@sentry/deno": "npm:@sentry/deno@^10.8.0",
    "@std/front-matter": "jsr:@std/front-matter@^1",
    "@std/path": "jsr:@std/path@^1",
    "@deno/gfm": "jsr:@deno/gfm@^0.11.0",
    "pako": "npm:pako@^2.1.0",
    "@types/pako": "npm:@types/pako@^2.0.0",
    "@seontechnologies/playwright-utils": "npm:@seontechnologies/playwright-utils@^3.10.1",
    "drizzle-orm": "npm:drizzle-orm@^0.39.1",
    "drizzle-kit": "npm:drizzle-kit@^0.30.4",
    "@ts-rex/argon2": "jsr:@ts-rex/argon2@^1.0.0",
    "@deno/kv-oauth": "jsr:@deno/kv-oauth@^0.11.0",
    "ml-matrix": "npm:ml-matrix@^6.11.1",
    "refractor": "npm:refractor@^4.8.1",
    "refractor/lang/tsx": "npm:refractor@^4.8.1/lang/tsx.js",
    "refractor/lang/typescript": "npm:refractor@^4.8.1/lang/typescript.js",
    "refractor/lang/javascript": "npm:refractor@^4.8.1/lang/javascript.js",
    "refractor/lang/json": "npm:refractor@^4.8.1/lang/json.js",
    "hast-util-to-jsx-runtime": "npm:hast-util-to-jsx-runtime@^2.3.0",
    "date-fns": "npm:date-fns@^4.1.0",
    "lodash-es": "npm:lodash-es@^4.17.21",
    "zod": "npm:zod@^3.23.0",
    "@faker-js/faker": "npm:@faker-js/faker@^9.0.0",
    "papaparse": "npm:papaparse@^5.5.0",
    "diff": "npm:diff@^7.0.0",
    "jsondiffpatch": "npm:jsondiffpatch@^0.7.0",
    "jmespath": "npm:jmespath@^0.16.0",
    "change-case": "npm:change-case@^5.4.0",
    "mathjs": "npm:mathjs@^14.0.0",
    "mnemonist": "npm:mnemonist@^0.39.0",
    "simple-statistics": "npm:simple-statistics@^7.8.0",
    "satori": "npm:satori@^0.12.1",
    "@resvg/resvg-wasm": "npm:@resvg/resvg-wasm@^2.6.2"
  },
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "jsx": "react-jsx",
    "jsxImportSource": "preact"
  },
  "_sandboxPermissions": {
    "_comment": "Sandbox permission set definitions (Story 7.7b, ADR-035). These profiles are enforced by DenoSandboxExecutor via explicit flags. Deno 2.5+ permission sets (--permission-set) not yet available, using flag fallback.",
    "minimal": {
      "read": false,
      "write": false,
      "net": false,
      "env": false,
      "run": false,
      "ffi": false
    },
    "readonly": {
      "read": ["./data", "/tmp"],
      "write": false,
      "net": false,
      "env": false,
      "run": false,
      "ffi": false
    },
    "network-api": {
      "read": false,
      "write": false,
      "net": true,
      "env": false,
      "run": false,
      "ffi": false
    },
    "filesystem": {
      "read": true,
      "write": ["/tmp"],
      "net": false,
      "env": false,
      "run": false,
      "ffi": false
    },
    "mcp-standard": {
      "read": true,
      "write": ["/tmp", "./output"],
      "net": true,
      "env": ["HOME", "PATH"],
      "run": false,
      "ffi": false
    },
    "trusted": {
      "read": true,
      "write": true,
      "net": true,
      "env": true,
      "run": false,
      "ffi": false
    }
  }
}
