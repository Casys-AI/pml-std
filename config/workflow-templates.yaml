# ============================================================================
# Workflow Templates - Examples & Documentation
# ============================================================================
#
# Ce fichier contient des EXEMPLES de workflows DAG.
# Ces templates NE SONT PAS chargés automatiquement - le GraphRAG apprend
# les patterns organiquement depuis l'usage réel (ADR-026 gère le cold start).
#
# Pour charger manuellement (optionnel):
#   agentcards workflows sync --path config/workflow-templates.yaml
#
# ============================================================================
# FORMAT DES TOOL IDs
# ============================================================================
#
#   serverId:toolName
#   Exemples: filesystem:read_file, memory:create_entities, fetch:http_get
#
# ============================================================================
# SERVEURS MCP DISPONIBLES
# ============================================================================
#
#   - filesystem: read_file, write_file, list_directory, edit_file...
#   - memory: create_entities, create_relations, read_graph, search_nodes...
#   - sequential-thinking: sequentialthinking
#   - playwright: navigate, click, screenshot, type, evaluate, drag...
#
# ============================================================================

workflows:
  # ==========================================================================
  # EXEMPLE 1: Format "steps" (séquentiel linéaire)
  # ==========================================================================
  #
  # Format: steps: [A, B, C] → crée les edges A→B, B→C
  # Utilisé pour les pipelines simples sans branchement.
  #
  # STRUCTURE:
  #   read_file → create_entities → read_graph
  #
  - name: sequential_pipeline
    steps:
      - filesystem:read_file
      - memory:create_entities
      - memory:read_graph

  # ==========================================================================
  # EXEMPLE 2: Format "edges" (DAG explicite)
  # ==========================================================================
  #
  # Format: edges: [[A,B], [B,C], [C,D]]
  # Chaque paire [source, target] crée un edge dans le GraphRAG.
  # Note: Les edges sont pour APPRENDRE les patterns, pas pour l'exécution.
  #
  # STRUCTURE:
  #   list_directory → read_file → create_entities → create_relations
  #
  - name: file_to_knowledge
    edges:
      - [filesystem:list_directory, filesystem:read_file]
      - [filesystem:read_file, memory:create_entities]
      - [memory:create_entities, memory:create_relations]

  # ==========================================================================
  # EXEMPLE 3: Browser automation pipeline (avec playwright)
  # ==========================================================================
  #
  # STRUCTURE:
  #   navigate → snapshot → create_entities
  #
  - name: web_scraping_pipeline
    steps:
      - playwright:browser_navigate
      - playwright:browser_snapshot
      - memory:create_entities

# ============================================================================
# COMMENT LE GRAPHRAG APPREND
# ============================================================================
#
# Le GraphRAG n'a PAS BESOIN de ces templates pour fonctionner.
# Il apprend les patterns depuis l'usage réel:
#
#   1. User exécute: read_file → create_entities
#   2. GraphRAG crée edge: read_file → create_entities (confidence: 0.9)
#   3. Plus c'est utilisé, plus la confidence augmente
#   4. Suggestions futures basées sur ces patterns appris
#
# ADR-026 gère le "cold start" quand le graphe est vide.
#
# ============================================================================
